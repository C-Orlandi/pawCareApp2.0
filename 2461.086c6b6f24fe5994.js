"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2461],{2461:(C,f,d)=>{d.r(f),d.d(f,{GestionarMascotaPage:()=>j});var F=d(467),a=d(3092),u=d(2881),c=d(9417),o=d(1360);function b(e,m){1&e&&(o.j41(0,"ion-text",7)(1,"p",17),o.EFF(2,"El nombre es obligatorio."),o.k0s()())}function g(e,m){1&e&&(o.j41(0,"ion-text",7)(1,"p",17),o.EFF(2,"El tipo es obligatorio."),o.k0s()())}function M(e,m){1&e&&(o.j41(0,"ion-text",7)(1,"p",17),o.EFF(2,"La fecha de nacimiento es obligatoria."),o.k0s()())}let v=(()=>{var e;class m{constructor(n,t){this.modalCtrl=n,this.fb=t}ngOnInit(){var n,t,i,l,r,p,h;this.mascotaForm=this.fb.group({nombre:[(null===(n=this.mascota)||void 0===n?void 0:n.nombre)||"",c.k0.required],tipo:[(null===(t=this.mascota)||void 0===t?void 0:t.tipo)||"",c.k0.required],raza:[(null===(i=this.mascota)||void 0===i?void 0:i.raza)||""],fechaNacimiento:[(null===(l=this.mascota)||void 0===l?void 0:l.fechaNacimiento)||"",c.k0.required],edad:[(null===(r=this.mascota)||void 0===r?void 0:r.edad)||""],peso:[(null===(p=this.mascota)||void 0===p?void 0:p.peso)||""],imagen:[(null===(h=this.mascota)||void 0===h?void 0:h.imagen)||""]})}guardar(){var n,t;if(this.mascotaForm.invalid)return;const i={...this.mascotaForm.value,mid:(null===(n=this.mascota)||void 0===n?void 0:n.mid)||this.generarMID(),usuarioUid:(null===(t=this.mascota)||void 0===t?void 0:t.usuarioUid)||"desconocido"};this.modalCtrl.dismiss(i)}cerrar(){this.modalCtrl.dismiss(!1)}generarMID(){return Math.random().toString(36).substring(2,10)}}return(e=m).\u0275fac=function(n){return new(n||e)(o.rXU(a.W3),o.rXU(c.ok))},e.\u0275cmp=o.VBU({type:e,selectors:[["app-modal-mascota"]],inputs:{mascota:"mascota"},decls:51,vars:7,consts:[["color","tertiary"],["slot","end"],[3,"click"],[1,"ion-padding"],[3,"ngSubmit","formGroup"],["lines","inset"],["position","floating"],["color","danger"],["formControlName","nombre"],["color","danger",4,"ngIf"],["formControlName","tipo"],["formControlName","raza"],["formControlName","fechaNacimiento","presentation","date"],["formControlName","edad","type","number"],["formControlName","peso","type","number"],["formControlName","imagen"],["expand","block","shape","round","size","large","type","submit","color","dark",1,"ion-margin-top",3,"disabled"],[1,"ion-padding-start"]],template:function(n,t){if(1&n&&(o.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),o.EFF(3),o.k0s(),o.j41(4,"ion-buttons",1)(5,"ion-button",2),o.bIt("click",function(){return t.cerrar()}),o.EFF(6,"Cerrar"),o.k0s()()()(),o.j41(7,"ion-content",3)(8,"ion-card")(9,"ion-card-content")(10,"form",4),o.bIt("ngSubmit",function(){return t.guardar()}),o.j41(11,"ion-item",5)(12,"ion-label",6),o.EFF(13,"Nombre "),o.j41(14,"ion-text",7),o.EFF(15,"*"),o.k0s()(),o.nrm(16,"ion-input",8),o.k0s(),o.DNE(17,b,3,0,"ion-text",9),o.j41(18,"ion-item",5)(19,"ion-label",6),o.EFF(20,"Tipo "),o.j41(21,"ion-text",7),o.EFF(22,"*"),o.k0s()(),o.nrm(23,"ion-input",10),o.k0s(),o.DNE(24,g,3,0,"ion-text",9),o.j41(25,"ion-item",5)(26,"ion-label",6),o.EFF(27,"Raza"),o.k0s(),o.nrm(28,"ion-input",11),o.k0s(),o.j41(29,"ion-item",5)(30,"ion-label",6),o.EFF(31,"Fecha Nacimiento "),o.j41(32,"ion-text",7),o.EFF(33,"*"),o.k0s()(),o.nrm(34,"ion-datetime",12),o.k0s(),o.DNE(35,M,3,0,"ion-text",9),o.j41(36,"ion-item",5)(37,"ion-label",6),o.EFF(38,"Edad"),o.k0s(),o.nrm(39,"ion-input",13),o.k0s(),o.j41(40,"ion-item",5)(41,"ion-label",6),o.EFF(42,"Peso"),o.k0s(),o.nrm(43,"ion-input",14),o.k0s(),o.j41(44,"ion-item",5)(45,"ion-label",6),o.EFF(46,"URL Imagen"),o.k0s(),o.nrm(47,"ion-input",15),o.k0s(),o.j41(48,"ion-button",16),o.EFF(49),o.k0s(),o.EFF(50,"\nc "),o.k0s()()()()),2&n){let i,l,r;o.R7$(3),o.JRh(t.mascota?"Editar Mascota":"Nueva Mascota"),o.R7$(7),o.Y8G("formGroup",t.mascotaForm),o.R7$(7),o.Y8G("ngIf",(null==(i=t.mascotaForm.get("nombre"))?null:i.touched)&&(null==(i=t.mascotaForm.get("nombre"))?null:i.hasError("required"))),o.R7$(7),o.Y8G("ngIf",(null==(l=t.mascotaForm.get("tipo"))?null:l.touched)&&(null==(l=t.mascotaForm.get("tipo"))?null:l.hasError("required"))),o.R7$(11),o.Y8G("ngIf",(null==(r=t.mascotaForm.get("fechaNacimiento"))?null:r.touched)&&(null==(r=t.mascotaForm.get("fechaNacimiento"))?null:r.hasError("required"))),o.R7$(13),o.Y8G("disabled",t.mascotaForm.invalid),o.R7$(),o.SpI(" ",t.mascota?"Actualizar":"Crear"," Mascota ")}},dependencies:[a.bv,a.Jm,a.QW,a.b_,a.I9,a.W9,a.A9,a.eU,a.$w,a.uz,a.he,a.IO,a.BC,a.ai,a.su,a.Je,a.Gw,u.MD,u.bT,c.YN,c.qT,c.BC,c.cb,c.X1,c.j4,c.JD],encapsulation:2}),m})();var _=d(8860),k=d(651);function E(e,m){if(1&e){const s=o.RV6();o.j41(0,"ion-item")(1,"ion-label")(2,"h2"),o.EFF(3),o.k0s(),o.j41(4,"p"),o.EFF(5),o.k0s(),o.j41(6,"p"),o.EFF(7),o.k0s()(),o.j41(8,"ion-button",5),o.bIt("click",function(){const t=o.eBV(s).$implicit,i=o.XpG();return o.Njj(i.abrirModal(t))}),o.nrm(9,"ion-icon",6),o.k0s(),o.j41(10,"ion-button",7),o.bIt("click",function(){const t=o.eBV(s).$implicit,i=o.XpG();return o.Njj(i.eliminarMascota(t.mid))}),o.nrm(11,"ion-icon",8),o.k0s()()}if(2&e){const s=m.$implicit;o.R7$(3),o.JRh(s.nombre),o.R7$(2),o.SpI("Tipo: ",s.tipo,""),o.R7$(2),o.SpI("Due\xf1o: ",s.nombreDueno,"")}}let j=(()=>{var e;class m{constructor(n,t,i){this.mascotaService=n,this.duenoService=t,this.modalController=i,this.mascotas=[],this.duenosMap=new Map}ngOnInit(){this.duenoService.getDuenos().subscribe(n=>{this.duenosMap.clear(),n.forEach(t=>{this.duenosMap.set(t.uid,t.nombre)}),this.mascotaService.getMascotas().subscribe(t=>{this.mascotas=t.map(i=>({...i,nombreDueno:this.duenosMap.get(i.usuarioUid)||"Desconocido"}))})})}abrirModal(n){var t=this;return(0,F.A)(function*(){const i=yield t.modalController.create({component:v,componentProps:{mascota:n}});i.onDidDismiss().then(l=>{const r=l.data;r&&(n?t.mascotaService.actualizarMascota(r):t.mascotaService.crearMascota(r))}),yield i.present()})()}eliminarMascota(n){confirm("\xbfSeguro que quieres eliminar esta mascota?")&&this.mascotaService.eliminarMascota(n)}}return(e=m).\u0275fac=function(n){return new(n||e)(o.rXU(_.W),o.rXU(k.p),o.rXU(a.W3))},e.\u0275cmp=o.VBU({type:e,selectors:[["app-gestionar-mascota"]],decls:10,vars:1,consts:[["slot","end"],[3,"click"],["slot","add"],[1,"ion-padding"],[4,"ngFor","ngForOf"],["slot","end","color","warning","size","small",3,"click"],["name","create","slot","icon-only"],["slot","end","color","danger","size","small",3,"click"],["name","trash","slot","icon-only"]],template:function(n,t){1&n&&(o.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),o.EFF(3,"Gestionar Mascotas"),o.k0s(),o.j41(4,"ion-buttons",0)(5,"ion-button",1),o.bIt("click",function(){return t.abrirModal()}),o.nrm(6,"ion-buttons",2),o.k0s()()()(),o.j41(7,"ion-content",3)(8,"ion-list"),o.DNE(9,E,12,3,"ion-item",4),o.k0s()()),2&n&&(o.R7$(9),o.Y8G("ngForOf",t.mascotas))},dependencies:[u.MD,u.Sq,a.bv,a.Jm,a.QW,a.W9,a.eU,a.iq,a.uz,a.he,a.nf,a.BC,a.ai],encapsulation:2}),m})()}}]);