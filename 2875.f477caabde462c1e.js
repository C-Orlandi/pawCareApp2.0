"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2875],{2875:(y,f,a)=>{a.r(f),a.d(f,{RegisterPage:()=>T});var b=a(467),h=a(2881),i=a(9417),x=a(8032),p=a.n(x),t=a(3092),_=a(9967),e=a(1360),P=a(5096),v=a(4796);function R(o,c){1&o&&(e.j41(0,"ion-text",15)(1,"p",16),e.EFF(2,"El nombre es obligatorio."),e.k0s()())}function C(o,c){1&o&&(e.j41(0,"ion-text",15)(1,"p",16),e.EFF(2,"El contacto es obligatorio."),e.k0s()())}function O(o,c){1&o&&(e.j41(0,"ion-text",15)(1,"p",16),e.EFF(2,"El correo es obligatorio."),e.k0s()())}function M(o,c){1&o&&(e.j41(0,"ion-text",15)(1,"p",16),e.EFF(2,"El correo es inv\xe1lido."),e.k0s()())}function D(o,c){1&o&&(e.j41(0,"ion-text",15)(1,"p",16),e.EFF(2,"La contrase\xf1a es obligatoria."),e.k0s()())}function k(o,c){1&o&&(e.j41(0,"ion-text",15)(1,"p",16),e.EFF(2,"La contrase\xf1a debe tener al menos 6 caracteres."),e.k0s()())}let T=(()=>{var o;class c{constructor(n,r,l,u,d,m,s){this.router=n,this.loadingController=r,this.alertController=l,this.formBuilder=u,this.authService=d,this.menuController=m,this.firestore=s,this.registerForm=this.formBuilder.group({nombre:["",[i.k0.required]],contacto:["",[i.k0.required]],email:["",[i.k0.required,i.k0.email]],pass:["",[i.k0.required,i.k0.minLength(6)]]})}ngOnInit(){this.menuController.enable(!1)}registrarse(){var n=this;return(0,b.A)(function*(){if(n.registerForm.invalid)return void p().fire({icon:"warning",title:"Formulario inv\xe1lido",text:"Por favor completa todos los campos correctamente.",confirmButtonText:"OK",heightAuto:!1});const{nombre:r,contacto:l,email:u,pass:d}=n.registerForm.value,m=yield n.loadingController.create({message:"Registrando..."});yield m.present();try{const g=(yield n.authService.register(u,d)).user;g&&(yield(0,_.BN)((0,_.H9)(n.firestore,"usuarios",g.uid),{uid:g.uid,nombre:r,contacto:l,email:u,tipo:"dueno"}),yield(0,_.BN)((0,_.H9)(n.firestore,"duenos",g.uid),{uid:g.uid,nombre:r,contacto:l,email:u,creadoEn:new Date}),yield m.dismiss(),p().fire({icon:"success",title:"Registro Exitoso",text:"Usuario registrado correctamente",confirmButtonText:"OK",heightAuto:!1}).then(()=>{var E;null===(E=document.activeElement)||void 0===E||E.blur(),n.router.navigate(["/login"])}))}catch(s){console.error("\u{1f525} Error al registrar en Firebase:",s),yield m.dismiss(),n.mostrarMensajeDeError(null==s?void 0:s.code)}})()}mostrarMensajeDeError(n){let r="Hubo un error al registrar el usuario.";switch(n){case"auth/email-already-in-use":r="El correo ya est\xe1 registrado.";break;case"auth/invalid-email":r="El correo no es v\xe1lido.";break;case"auth/weak-password":r="La contrase\xf1a es muy d\xe9bil."}p().fire({icon:"error",title:"Error",text:r,confirmButtonText:"OK",heightAuto:!1})}}return(o=c).\u0275fac=function(n){return new(n||o)(e.rXU(P.Ix),e.rXU(t.Xi),e.rXU(t.hG),e.rXU(i.ok),e.rXU(v.u),e.rXU(t._t),e.rXU(_._7))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-register"]],decls:37,vars:10,consts:[[3,"translucent"],[1,"ion-padding",3,"fullscreen"],[1,"banner-container",2,"text-align","center","margin-bottom","20px"],["src","../../../assets/img/","alt","Banner registro",2,"max-width","150px","height","auto"],[1,"ion-padding"],[1,"ion-text-center"],[3,"ngSubmit","formGroup"],["position","floating"],["formControlName","nombre","type","text","required",""],["color","danger",4,"ngIf"],["formControlName","contacto","type","tel","required",""],["formControlName","email","type","email","required",""],["formControlName","pass","type","password","required",""],[1,"ion-text-center",2,"margin-top","20px"],["type","submit","expand","block","color","dark",3,"disabled"],["color","danger"],[1,"ion-padding-start"]],template:function(n,r){if(1&n&&(e.nrm(0,"ion-header",0),e.j41(1,"ion-content",1)(2,"div",2),e.nrm(3,"img",3),e.k0s(),e.j41(4,"ion-card",4)(5,"ion-card-header")(6,"ion-card-title",5),e.EFF(7,"Registro de Usuario"),e.k0s(),e.j41(8,"ion-card-subtitle",5),e.EFF(9," Completa los campos para crear tu cuenta "),e.k0s()(),e.j41(10,"ion-card-content")(11,"form",6),e.bIt("ngSubmit",function(){return r.registrarse()}),e.j41(12,"ion-item")(13,"ion-label",7),e.EFF(14,"Nombre completo"),e.k0s(),e.nrm(15,"ion-input",8),e.k0s(),e.DNE(16,R,3,0,"ion-text",9),e.j41(17,"ion-item")(18,"ion-label",7),e.EFF(19,"Tel\xe9fono"),e.k0s(),e.nrm(20,"ion-input",10),e.k0s(),e.DNE(21,C,3,0,"ion-text",9),e.j41(22,"ion-item")(23,"ion-label",7),e.EFF(24,"Correo"),e.k0s(),e.nrm(25,"ion-input",11),e.k0s(),e.DNE(26,O,3,0,"ion-text",9)(27,M,3,0,"ion-text",9),e.j41(28,"ion-item")(29,"ion-label",7),e.EFF(30,"Contrase\xf1a"),e.k0s(),e.nrm(31,"ion-input",12),e.k0s(),e.DNE(32,D,3,0,"ion-text",9)(33,k,3,0,"ion-text",9),e.j41(34,"div",13)(35,"ion-button",14),e.EFF(36," Registrarse "),e.k0s()()()()()()),2&n){let l,u,d,m,s,g;e.Y8G("translucent",!0),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(10),e.Y8G("formGroup",r.registerForm),e.R7$(5),e.Y8G("ngIf",(null==(l=r.registerForm.get("nombre"))?null:l.hasError("required"))&&(null==(l=r.registerForm.get("nombre"))?null:l.touched)),e.R7$(5),e.Y8G("ngIf",(null==(u=r.registerForm.get("contacto"))?null:u.hasError("required"))&&(null==(u=r.registerForm.get("contacto"))?null:u.touched)),e.R7$(5),e.Y8G("ngIf",(null==(d=r.registerForm.get("email"))?null:d.hasError("required"))&&(null==(d=r.registerForm.get("email"))?null:d.touched)),e.R7$(),e.Y8G("ngIf",(null==(m=r.registerForm.get("email"))?null:m.hasError("email"))&&(null==(m=r.registerForm.get("email"))?null:m.touched)),e.R7$(5),e.Y8G("ngIf",(null==(s=r.registerForm.get("pass"))?null:s.hasError("required"))&&(null==(s=r.registerForm.get("pass"))?null:s.touched)),e.R7$(),e.Y8G("ngIf",(null==(g=r.registerForm.get("pass"))?null:g.hasError("minlength"))&&(null==(g=r.registerForm.get("pass"))?null:g.touched)),e.R7$(2),e.Y8G("disabled",r.registerForm.invalid)}},dependencies:[h.MD,h.bT,t.bv,t.Jm,t.b_,t.I9,t.ME,t.HW,t.tN,t.W9,t.eU,t.$w,t.uz,t.he,t.IO,t.Gw,i.YN,i.qT,i.BC,i.cb,i.YS,i.X1,i.j4,i.JD],styles:["ion-card[_ngcontent-%COMP%]{margin-top:40px;padding:16px;border-radius:12px;box-shadow:0 4px 8px #0000001a}ion-card-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;margin-bottom:4px}ion-card-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:gray;margin-bottom:16px}ion-button[_ngcontent-%COMP%]{margin-top:10px;--background: var(--ion-color-primary);--border-radius: 8px;font-weight:600}.banner-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;margin-bottom:16px}.banner-image[_ngcontent-%COMP%]{width:100%;max-height:180px;object-fit:cover;border-radius:12px}"]}),c})()}}]);