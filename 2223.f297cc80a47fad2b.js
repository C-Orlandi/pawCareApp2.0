"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2223],{2223:(C,d,n)=>{n.r(d),n.d(d,{MisMascotasPage:()=>h});var c=n(467),m=n(2881),r=n(3092),t=n(1360),_=n(5096),g=n(9967),u=n(8880),M=n(8860);function p(s,l){if(1&s){const i=t.RV6();t.j41(0,"ion-card",13),t.bIt("click",function(){const o=t.eBV(i).$implicit,e=t.XpG();return t.Njj(e.mostrarOpcionesMascota(o))}),t.nrm(1,"img",14),t.j41(2,"div",15),t.EFF(3),t.k0s()()}if(2&s){const i=l.$implicit;t.R7$(),t.Y8G("src",i.imagen||"assets/mascotas/default.jpg",t.B4B),t.R7$(2),t.JRh(i.nombre)}}let h=(()=>{var s;class l{constructor(a,o,e,f,P,v,O){this.router=a,this.firestore=o,this.menuController=e,this.actionSheetCtrl=f,this.toastCtrl=P,this.mascotaService=v,this.navCtrl=O,this.mascotas=[]}ionViewWillEnter(){this.menuController.enable(!0);const a=localStorage.getItem("usuarioLogin");a&&(this.usuarioLogin=JSON.parse(a),this.cargarMascotas())}cargarMascotas(){var a=this;return(0,c.A)(function*(){try{var o;if(null===(o=a.usuarioLogin)||void 0===o||!o.uid)return void console.error("UID de usuario no disponible");a.mascotaService.getMascotasPorUsuario(a.usuarioLogin.uid).subscribe({next:e=>{a.mascotas=e},error:e=>{console.error("Error al cargar mascotas desde el servicio:",e)}})}catch(e){console.error("Error general al cargar mascotas:",e)}})()}agregarMascota(){this.router.navigate(["/registro-mascota"])}mostrarOpcionesMascota(a){var o=this;return(0,c.A)(function*(){yield(yield o.actionSheetCtrl.create({header:a.nombre,buttons:[{text:"Ver Perfil",icon:"eye",handler:()=>{localStorage.setItem("mascotaSeleccionada",JSON.stringify(a)),o.router.navigate(["/home-mascota"])}},{text:"Editar",icon:"create",handler:()=>{localStorage.setItem("mascotaSeleccionada",JSON.stringify(a)),o.router.navigate(["/registro-mascota"],{queryParams:{modo:"editar"}})}},{text:"Eliminar",icon:"trash",role:"destructive",handler:()=>o.eliminarMascota(a.mid)},{text:"Cancelar",icon:"close",role:"cancel"}]})).present()})()}eliminarMascota(a){var o=this;return(0,c.A)(function*(){try{yield o.mascotaService.eliminarMascota(a),yield o.mostrarToast("Mascota eliminada."),o.cargarMascotas()}catch(e){console.error("Error al eliminar mascota:",e),o.mostrarToast("Error al eliminar.")}})()}mostrarToast(a){var o=this;return(0,c.A)(function*(){yield(yield o.toastCtrl.create({message:a,duration:2e3,position:"bottom"})).present()})()}goTo(a){this.router.navigate(["/"+a])}goBack(){this.router.navigate(["/userhome"])}}return(s=l).\u0275fac=function(a){return new(a||s)(t.rXU(_.Ix),t.rXU(g._7),t.rXU(r._t),t.rXU(r.GD),t.rXU(r.K_),t.rXU(M.W),t.rXU(u.q9))},s.\u0275cmp=t.VBU({type:s,selectors:[["app-mis-mascotas"]],decls:16,vars:1,consts:[["color","purple"],["slot","start"],["fill","clear",3,"click"],["name","arrow-back","slot","icon-only"],["slot","end"],[3,"click"],["name","person"],[1,"ion-padding"],[1,"mascotas-scroll-container"],[1,"mascotas-scroll"],["class","mascota-card",3,"click",4,"ngFor","ngForOf"],[1,"mascota-add-button",3,"click"],["name","add",1,"add-icon"],[1,"mascota-card",3,"click"],["alt","Mascota",3,"src"],[1,"nombre"]],template:function(a,o){1&a&&(t.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1)(3,"ion-button",2),t.bIt("click",function(){return o.goBack()}),t.nrm(4,"ion-icon",3),t.k0s()(),t.j41(5,"ion-title"),t.EFF(6,"Mis Mascotas"),t.k0s(),t.j41(7,"ion-buttons",4)(8,"ion-button",5),t.bIt("click",function(){return o.goTo("perfil-menu")}),t.nrm(9,"ion-icon",6),t.k0s()()()(),t.j41(10,"ion-content",7)(11,"div",8)(12,"div",9),t.DNE(13,p,4,2,"ion-card",10),t.j41(14,"div",11),t.bIt("click",function(){return o.agregarMascota()}),t.nrm(15,"ion-icon",12),t.k0s()()()()),2&a&&(t.R7$(13),t.Y8G("ngForOf",o.mascotas))},dependencies:[m.MD,m.Sq,r.bv,r.Jm,r.QW,r.b_,r.W9,r.eU,r.iq,r.BC,r.ai],styles:[".mascota-card[_ngcontent-%COMP%]{flex:0 0 auto;width:100px;height:130px;background:#030303;border-radius:12px;overflow:hidden;box-shadow:0 2px 6px #000000f5;text-align:center}.mascota-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:90px;object-fit:cover}.mascota-card[_ngcontent-%COMP%]   .nombre[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;padding:6px 4px}.mascota-add-button[_ngcontent-%COMP%]   .add-icon[_ngcontent-%COMP%]{font-size:3rem;color:#dbd8d8}.mascotas-scroll-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;padding-top:0;margin-top:-50px;overflow-x:hidden}.mascotas-scroll[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:12px;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none}.mascotas-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.mascota-card[_ngcontent-%COMP%], .mascota-add-button[_ngcontent-%COMP%]{width:100px;height:150px;flex-shrink:0;border-radius:12px;background-color:#504d4d86;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center}.mascota-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:120px;object-fit:cover;border-radius:12px 12px 0 0}.mascota-add-button[_ngcontent-%COMP%]{margin-top:10px}"]}),l})()}}]);